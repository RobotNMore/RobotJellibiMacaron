# "BluetoothComm"



### HC06 Bluetooth 모듈

젤리비보드에는 `HC-06 Bluetooth 모듈`을 연결할 수 있는 포트(`BT`)가 준비되어 있습니다. 이를 통해서 스마트폰/태블릿/노트북 등의 블루투스 통신이 가능한 기기와 연결할 수 있습니다. 

`HC-06 Bluetooth 모듈` 과 젤리비보드를 연결 하는 네개의 핀은 아래와 같습니다. 

| HC-06 핀(포트) | 기능        | 비고                          |
| -------------- | ----------- | ----------------------------- |
| VCC            | 전원        |                               |
| GND            | 접지        |                               |
| TXD            | 시리얼 출력 | 젤리비의 RX (RX, D0) 와 연결  |
| RXD            | 시리얼 입력 | 젤리비의 출력(TX, D1) 과 연결 |

`HC-06 모듈` 은 `BT` 포트를 통해 젤리비보드의 D0/D1 포트와 연결되어 Serial 통신을 하게 됩니다.  

젤리비보드의 Serial Port (D0/D1) 은 또한 USB 를 통해 PC 와 연결되어 프로그램을 `업로드(Ctrl+U)` 하거나 아두이노 툴의 `시리얼 모니터(Ctrl+Shift+M)` 에서 디버그용 메세지를 출력하는데에도 사용됩니다. 

젤리비보드의 시리얼포트를 `HC-06 모듈` 과 PC와의 통신에 함께 사용되므로 혼선이 발생합니다. 프로그램 `업로드(Ctrl+U)` 시에는 `HC-06 모듈` 을 젤리비보드에서 탈거하여  문제를 피해야 합니다.

`HC-06 Bluetooth 모듈` 공장 출하상태는 아래와 같이 설정되어 있으므로 PC 와 연결하거나 젤리비보드의 프로그램에서 통신 시 참고 할 수 있습니다. 

| 항목             | 기본값                                                       |
| ---------------- | ------------------------------------------------------------ |
| Device Name      | HC06                                                         |
| PIN Code         | 1234                                                         |
| Serial Port 설정 | Baudrate : 9600<br />Data 비트 : 8 bit <br />Stop 비트 : 1bit<br />Parity 비트 : None |



### 안드로이드용 블루투스 앱 

안드로이드 앱마켓에는 HC06 과 연결하여 통신할 수 있는 많은  수의 앱이 있습니다.   
이 샘플을 동작시키기 위해서 스마트 폰에 "arduino bluetooth controller" 앱을 설치 하고 버튼을 만들어  
`BluetoothComm` 에서 사용하는 명령인 'U', 'R', 'D', 'S', 'B' 등의 명령을 전송하도록 준비합니다. 

 

### _BluetoothComm_ 실행 

1. 아두이노가 설치 된 PC 와 젤리비보드를 USB 커넥터로 연결하고 전원스위치를 켭니다.   
   이 때 젤리비보드의 `PWR` LED 가 녹색으로 켜집니다. 
2. PC 에서 아두이노 툴을 실행하고 연결정보(보드, 포트, 프로세서) 를 설정합니다. 
3. _**BluetoothComm.ino**_  파일을 아두이노 툴에서 열고 `업로드(Ctrl+U)` 합니다. 
4. `BT` 포트에 `HC-06` 모듈을 연결합니다. 
5. 스마트폰에서 "arduino bluetooth controller" 앱을 실행하고 `HC-06 모듈`과 패어링 후 접속합니다.
6. 아두이노의 `시리얼 모니터(Ctrl+Shift+M)` 를 열고 화면아래의 보레잇(Baudrate) 을 9600 으로 변경합니다.
7. "arduino bluetooth controller" 앱에서 버튼을 눌렀을 때 _**BluetoothComm.ino**_에서 명령어로 사용하는 'U/R/D/L/S/B' 등의 문자를 전송하도록 설정하고 시험합니다.  